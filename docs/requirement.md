# ğŸµ BizSound Stock - è¦ä»¶å®šç¾©æ›¸

## 1. ã‚µãƒ¼ãƒ“ã‚¹æ¦‚è¦

**åº—èˆ—ï¼ˆé£²é£Ÿåº—ãƒ»ç¾å®¹å®¤ãƒ»ã‚¸ãƒ ç­‰ï¼‰å‘ã‘ã®è‘—ä½œæ¨©ãƒ•ãƒªãƒ¼BGMé…ä¿¡SaaS**

åº—èˆ—ã‚ªãƒ¼ãƒŠãƒ¼ã¯ã€JASRACã¸ã®è¤‡é›‘ãªç”³è«‹ã‚„æ”¯æ‰•ã„ã‚’ã™ã‚‹ã“ã¨ãªãã€æœˆé¡ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã§åº—å†…ã®é›°å›²æ°—ã«åˆã£ãŸBGMã‚’æµã™ã“ã¨ãŒã§ãã¾ã™ã€‚

### ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ | èª¬æ˜ |
|---------|------|
| åº—èˆ—ã‚ªãƒ¼ãƒŠãƒ¼ | ã‚«ãƒ•ã‚§ãƒ»ç¾å®¹å®¤ãƒ»ã‚¸ãƒ ãƒ»å°å£²åº—ãªã©ã®çµŒå–¶è€…ï¼ˆITãƒªãƒ†ãƒ©ã‚·ãƒ¼ã¯å•ã‚ãªã„ï¼‰ |
| ç®¡ç†è€… | ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é‹å–¶è€…ï¼ˆæ¥½æ›²ãƒ»ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆãƒ»åˆ†æã‚’ç®¡ç†ï¼‰ |

---

## 2. ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼ & ç‰¹å¾´

### ğŸª åº—èˆ—ç‰¹åŒ–ã®UX
- **æ¥­ç¨®é¸æŠã ã‘ã§æœ€é©åŒ–**: ã€Œã‚«ãƒ•ã‚§ã€ã€Œã‚¸ãƒ ã€ãªã©ã‚’é¸ã¶ã ã‘ã§æœ€é©ãªãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆãŒææ¡ˆã•ã‚Œã‚‹
- **é€”åˆ‡ã‚Œãªã„å†ç”Ÿ**: Howler.js + Zustand ã«ã‚ˆã‚‹é€£ç¶šå†ç”Ÿãƒ»ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å†ç”Ÿ

### ğŸ› ï¸ é‹å–¶ãƒ»ç®¡ç†ã®åŠ¹ç‡åŒ–
- **ç°¡å˜ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: R2ã«æ›²ã‚’ã‚¢ãƒƒãƒ—ã—ã€Œã‚¸ãƒ£ãƒ³ãƒ«ã€ã€Œãƒ ãƒ¼ãƒ‰ã€ã‚’ã‚¿ã‚°ä»˜ã‘
- **å³æ™‚å…¬é–‹**: ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã‚’ã€Œå…¬é–‹ã€ã«ã™ã‚‹ã¨ã€ŒNew Releasesã€ã«å³åº§ã«åæ˜ 

### ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³ãªåˆ†æ
- **æ¥­ç¨®Ã—ã‚¸ãƒ£ãƒ³ãƒ«åˆ†æ**: ã€Œç¾å®¹å®¤ã§JazzãŒäººæ°—ã€ã¨ã„ã£ãŸå‚¾å‘ã‚’å¯è¦–åŒ–

### ğŸ’³ ã‚·ãƒ³ãƒ—ãƒ«ãªæ±ºæ¸ˆ
- **Stripeé€£æº**: Free Trial â†’ Premium ã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³èª²é‡‘

---

## 3. ãƒ‡ã‚¶ã‚¤ãƒ³ & ãƒ†ãƒ¼ãƒ

| é …ç›® | å€¤ | ç”¨é€” |
|------|-----|------|
| **Primary** | `#1e3a8a` (Deep Indigo) | ä¿¡é ¼ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ« |
| **Accent** | `#f59e0b` (Amber) | å†ç”Ÿãƒœã‚¿ãƒ³ã€å¼·èª¿è¦ç´  |
| **Background** | `#0f172a` (Dark Slate) | ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ |

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**: Spotify-like but Minimalï¼ˆæ¥­å‹™åˆ©ç”¨ã«ç‰¹åŒ–ã—ãŸã‚·ãƒ³ãƒ—ãƒ«ã•ï¼‰

---

## 4. æ©Ÿèƒ½è¦ä»¶

### 4-1. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿèƒ½ï¼ˆåº—èˆ—å´ï¼‰

| æ©Ÿèƒ½ | èª¬æ˜ | å®Ÿè£…çŠ¶æ³ |
|------|------|:--------:|
| èªè¨¼ | ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³ (Supabase Auth) | â³ |
| æ¥­ç¨®é¸æŠ | ç™»éŒ²æ™‚ã«æ¥­ç¨®ã‚’é¸æŠ | â³ |
| New Releases | `is_public=true` ã®æ–°ç€ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆè¡¨ç¤º | âœ… |
| Recommended | æ¥­ç¨®ã«ãƒãƒƒãƒã™ã‚‹ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆè¡¨ç¤º | âœ… |
| Mood/Genreæ¤œç´¢ | ã‚¿ã‚°ã§æ¢ã™ | âœ… |
| é€£ç¶šå†ç”Ÿ | ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆçµ‚äº†å¾Œã‚‚è‡ªå‹•å†ç”Ÿ | âœ… |
| ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å†ç”Ÿ | ç”»é¢é·ç§»ã—ã¦ã‚‚é€”åˆ‡ã‚Œãªã„ | âœ… |
| åŸºæœ¬æ“ä½œ | å†ç”Ÿ/åœæ­¢/ã‚¹ã‚­ãƒƒãƒ—/éŸ³é‡ | âœ… |
| ãŠæ°—ã«å…¥ã‚Š | ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆãƒ»æ¥½æ›²ã®ä¿å­˜ | âœ… |
| æ±ºæ¸ˆ | Stripe ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ | â³ |

### 4-2. ç®¡ç†è€…æ©Ÿèƒ½ï¼ˆé‹å–¶å´ï¼‰

| æ©Ÿèƒ½ | èª¬æ˜ | å®Ÿè£…çŠ¶æ³ |
|------|------|:--------:|
| æ¥½æ›²ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | R2ã¸MP3ä¿å­˜ + ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç™»éŒ² | âœ… |
| ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆç®¡ç† | ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤ | âœ… |
| å…¬é–‹è¨­å®š | `is_public` ãƒ•ãƒ©ã‚°åˆ‡ã‚Šæ›¿ãˆ | âœ… |
| ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¨­å®š | æ¥­ç¨®ãƒ»ãƒ ãƒ¼ãƒ‰è¨­å®š | âœ… |
| åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | Recharts ã‚°ãƒ©ãƒ•è¡¨ç¤º | âœ… |
| äººæ°—ãƒ©ãƒ³ã‚­ãƒ³ã‚° | TOPæ¥½æ›²ãƒ»ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆ | âœ… |
| æ¥­ç¨®åˆ¥åˆ†æ | ã‚¸ãƒ£ãƒ³ãƒ«å‚¾å‘ã®å¯è¦–åŒ– | âœ… |

---

## 5. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ |
|---------|------|
| **Framework** | Next.js 14+ (App Router) |
| **Language** | TypeScript |
| **UI** | Tailwind CSS, Shadcn/ui, Lucide-react |
| **Backend** | Supabase (PostgreSQL, Auth, RLS) |
| **Payment** | Stripe (Checkout, Webhooks, Portal) |
| **Storage** | Cloudflare R2 (S3äº’æ›) |
| **Audio** | Howler.js |
| **State** | Zustand |
| **Charts** | Recharts |

---

## 6. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### `profiles` (ãƒ¦ãƒ¼ã‚¶ãƒ¼)
| Column | Type | Description |
|--------|------|-------------|
| id | uuid | PK (Supabase Auth ID) |
| email | text | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| business_type | enum | cafe, salon, gym, retail, hotel, spa, other |
| is_admin | boolean | ç®¡ç†è€…ãƒ•ãƒ©ã‚° |
| stripe_customer_id | text | Stripeé¡§å®¢ID (å°†æ¥) |
| subscription_status | enum | active, trialing, past_due, canceled (å°†æ¥) |

### `songs` (æ¥½æ›²)
| Column | Type | Description |
|--------|------|-------------|
| id | uuid | PK |
| title | text | æ›²å |
| artist | text | ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå |
| file_key | text | R2ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| duration | int | ç§’æ•° |
| genre | enum | jazz, pop, bossa_nova, classical, ambient, lounge, etc. |
| mood | enum | morning, afternoon, evening, relaxing, upbeat, etc. |
| is_active | boolean | æœ‰åŠ¹/ç„¡åŠ¹ |
| play_count | int | å†ç”Ÿå›æ•° |

### `playlists` (ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆ)
| Column | Type | Description |
|--------|------|-------------|
| id | uuid | PK |
| title | text | ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆå |
| description | text | èª¬æ˜æ–‡ |
| cover_image_url | text | ã‚«ãƒãƒ¼ç”»åƒ |
| **is_public** | boolean | å…¬é–‹ãƒ•ãƒ©ã‚° (New Releasesè¡¨ç¤ºç”¨) |
| is_featured | boolean | ãŠã™ã™ã‚è¡¨ç¤º |
| target_business_type | enum[] | æ¨å¥¨æ¥­ç¨® (è¤‡æ•°å¯) |
| primary_genre | enum | ãƒ¡ã‚¤ãƒ³ã‚¸ãƒ£ãƒ³ãƒ« |
| primary_mood | enum | ãƒ¡ã‚¤ãƒ³ãƒ ãƒ¼ãƒ‰ |
| track_count | int | æ›²æ•° (è‡ªå‹•è¨ˆç®—) |
| total_duration | int | åˆè¨ˆæ™‚é–“ (è‡ªå‹•è¨ˆç®—) |
| **created_at** | timestamp | æ–°ç€é †è¡¨ç¤ºç”¨ |

### `playlist_songs` (ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«)
| Column | Type | Description |
|--------|------|-------------|
| playlist_id | uuid | FK |
| song_id | uuid | FK |
| sort_order | int | å†ç”Ÿé † |

### `play_logs` (åˆ†æç”¨ãƒ­ã‚°)
| Column | Type | Description |
|--------|------|-------------|
| id | uuid | PK |
| user_id | uuid | FK |
| song_id | uuid | FK |
| playlist_id | uuid | FK (nullable) |
| played_at | timestamp | å†ç”Ÿæ—¥æ™‚ |
| duration_played | int | å®Ÿéš›ã®å†ç”Ÿç§’æ•° |
| completed | boolean | å®Œäº†ãƒ•ãƒ©ã‚° |

### `user_favorites` (ãŠæ°—ã«å…¥ã‚Š)
| Column | Type | Description |
|--------|------|-------------|
| user_id | uuid | FK |
| playlist_id | uuid | FK (nullable) |
| song_id | uuid | FK (nullable) |

---

## 7. ç’°å¢ƒå¤‰æ•°

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxxx

# Cloudflare R2
R2_ACCOUNT_ID=xxxx
R2_ACCESS_KEY_ID=xxxx
R2_SECRET_ACCESS_KEY=xxxx
R2_BUCKET_NAME=store-bgm-music
NEXT_PUBLIC_R2_PUBLIC_URL=https://xxxx.r2.dev

# Stripe (å°†æ¥)
STRIPE_SECRET_KEY=sk_xxxx
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_xxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxx
```

---

## 8. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx              # ãƒ›ãƒ¼ãƒ  (New Releases + ãŠã™ã™ã‚)
â”‚   â”œâ”€â”€ layout.tsx            # å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ admin/                # ç®¡ç†ç”»é¢
â”‚   â”‚   â”œâ”€â”€ page.tsx          # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ songs/            # æ¥½æ›²ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ playlists/        # ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆç®¡ç†
â”‚   â”‚   â””â”€â”€ analytics/        # åˆ†æ
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ admin/songs/upload/  # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰API
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ music-player.tsx      # å†ç”Ÿãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”œâ”€â”€ playlist-grid.tsx     # ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆä¸€è¦§
â”‚   â””â”€â”€ sidebar.tsx           # ã‚µã‚¤ãƒ‰ãƒãƒ¼
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase/             # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ api/                  # APIé–¢æ•°
â”‚   â””â”€â”€ r2/                   # R2ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
â”œâ”€â”€ store/
â”‚   â””â”€â”€ player-store.ts       # Zustand (å†ç”ŸçŠ¶æ…‹)
â””â”€â”€ types/
    â””â”€â”€ database.ts           # å‹å®šç¾©
```

---

## 9. ä»Šå¾Œã®å®Ÿè£…äºˆå®š

| å„ªå…ˆåº¦ | æ©Ÿèƒ½ | èª¬æ˜ |
|:------:|------|------|
| ğŸ”´ | Supabase Auth | ãƒ­ã‚°ã‚¤ãƒ³/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ— |
| ğŸ”´ | RLSè¨­å®š | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ |
| ğŸŸ¡ | Stripeæ±ºæ¸ˆ | ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³èª²é‡‘ |
| ğŸŸ¡ | PWAå¯¾å¿œ | ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
| ğŸŸ¢ | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ | æ–°ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆé€šçŸ¥ |
| ğŸŸ¢ | å¤šè¨€èªå¯¾å¿œ | è‹±èªã‚µãƒãƒ¼ãƒˆ |

---

## 10. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
npm install
```

### 2. ç’°å¢ƒå¤‰æ•°è¨­å®š
`.env.local` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä¸Šè¨˜ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š

### 3. Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
1. [supabase.com](https://supabase.com) ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
2. SQL Editorã§ `supabase/schema.sql` ã‚’å®Ÿè¡Œ

### 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```bash
npm run dev
```

### ã‚¢ã‚¯ã‚»ã‚¹URL
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”»é¢: http://localhost:3000
- ç®¡ç†ç”»é¢: http://localhost:3000/admin
